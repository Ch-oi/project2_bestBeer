<section class="secondary">
    {{!--user ac dropdown bar start --}}
    <div class="dropdown text-center d-flex justify-content-center">
        <div class="dropdown p-2">
            <button class="btn btn-secondary dropdown-toggle btn-lg" type="button" id="myAC_dropdown"
                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                My Account
            </button>
            <div class="dropdown-menu" aria-labelledby="myAC_dropdown" style="font-size: 20px">
                <a class="dropdown-item text-white" href="/user/profile">Account Details</a>
            </div>
        </div>
        <div class="dropdown p-2">
            <button class="btn btn-secondary dropdown-toggle btn-lg" type="button" id="myPurchase_dropdown"
                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Activity
            </button>
            <div class="dropdown-menu" aria-labelledby="myPurchase_dropdown" style="font-size: 20px">
                <a class="dropdown-item text-white" href="/user/purchase_history">Purchases</a>
                <a class="dropdown-item text-white" href="/user/wishlist">Wishlist</a>
                <a class="dropdown-item text-white" href="/user/comment">Comments</a> 
            </div>
        </div>
        <div class="dropdown p-2">
            <button class="btn btn-secondary btn-lg" type="button" id="discount" aria-haspopup="true"
                aria-expanded="false">
                <a class="text-white text-decoration-none" href="/user/discount">Discount Codes</a>
            </button>
        </div>
    </div>
    {{!-- end of user ac dropdown bar --}}

{{#each userInfo}}
    <form id="accountDetails" class="col-12 text-center" action="/updateAccountDetails" method="PUT">
        <div class="form-group row" style="font-size:24px;font-weight:700">
            Account Details
        </div>
        <div class="form-group row">
            <label for="firstName" class="col-3 col-form-label">First Name</label>
            <div class="col-6">
                <input class="form-control" type="text" name="fname" value="{{first_name}}" id="fname" readonly>
            </div>
        </div>
        <div class="form-group row">
            <label for="lastName" class="col-3 col-form-label">Last Name</label>
            <div class="col-6">
                <input class="form-control" type="search" name="lname" value="{{last_name}}" id="lname" readonly>
            </div>
        </div>
        <div class="form-group row">
            <label for="emailInput" class="col-3 col-form-label">Email</label>
            <div class="col-6">
                <input class="form-control" type="email" name="email" value="{{email}}" id="email" readonly>
            </div>
        </div>
        <div class="form-group row">
            <label for="telInput" class="col-3 col-form-label">Telephone</label>
            <div class="col-6">
                <input class="form-control" type="tel" name="telephone" value="{{phone}}" id="tel" readonly>
            </div>
        </div>
        <div class="form-group row">
            <label for="firstName" class="col-3 col-form-label">Address</label>
            <div class="col-6">
                <input class="form-control" type="text" name="address" value="{{address}}" id="address" readonly>
            </div>
        </div>
        <input type="submit" class="btn btn-secondary mr-auto ml-auto">
    </form>
    {{/each}}
</section>

<script type='text/javascript'>
    $("#accountDetails").submit(function (event) {
        event.preventDefault();
        var fName = event.target.fName.value;
        var lName = event.target.lName.value;
        var email = event.target.email.value;
        var tel = event.target.telepone.value;
        var pw = event.target.password.value;
        var dob = event.target.dateOfBirth.value;
        var pw = event.target.address.value;
        var pw = event.target.deliveryInfo.value;

        var comment1 = $("<p/>", {
            class: "text-left",
            style: (color = "red"),
            html: `<small>Please enter a first name of less than 15 characters.</small>`,
        });

        var comment2 = $("<p/>", {
            class: "text-left",
            style: (color = "red"),
            html: `<small>Please enter a last name of less than 15 characters.</small>`,
        });

        var comment3 = $("<p/>", {
            class: "text-left",
            style: (color = "red"),
            html: `<small>Please enter a valid email address of less than 50 characters.</small>`,
        });

        var comment3 = $("<p/>", {
            class: "text-left",
            style: (color = "red"),
            html: `<small>Please enter a valid email address of less than 50 characters.</small>`,
        });

        var comment4 = $("<p/>", {
            class: "text-left",
            style: (color = "red"),
            html: `<small>Please enter a password of less than 10 characters.</small>`,
        });
        if (fName === "" || fName.length < 1 || fName.length > 15) {
            $("#fName").css("border", "red solid 2px");
            $("#fName").append(comment1);
        } else if (lName === "" || lName.length < 1 || lName.length > 15) {
            $("#lName").css("border", "red solid 2px");
            $("#lName").append(comment2);
        } else if (email === "" || email.length < 1 || email.length > 50) {
            $("#email").css("border", "red solid 2px");
            $("#email").append(comment3);
        } else if (pw === "" || pw.length < 1 || pw.length > 10) {
            $("#pw").css("border", "red solid 2px");
            $("#pw").append(comment4);
        } else {
            alert(`Thanks ${fName}, your registration has been submitted`);
            $("#fName").css("border", "");
            $("#lName").css("border", "");
            $("#email").css("border", "");
            $("#pw").css("border", "");
        }
    });
</script>